{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/components/jeecgbiz/JSelectDepart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/components/jeecgbiz/JSelectDepart.vue","mtime":1596297340383},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport JSelectDepartModal from './modal/JSelectDepartModal'\nexport default {\n  name: 'JSelectDepart',\n  components:{\n    JSelectDepartModal\n  },\n  props:{\n    modalWidth:{\n      type:Number,\n      default:500,\n      required:false\n    },\n    multi:{\n      type:Boolean,\n      default:false,\n      required:false\n    },\n    rootOpened:{\n      type:Boolean,\n      default:true,\n      required:false\n    },\n    value:{\n      type:String,\n      required:false\n    },\n    disabled:{\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    // 自定义返回字段，默认返回 id\n    customReturnField: {\n      type: String,\n      default: 'id'\n    }\n  },\n  data(){\n    return {\n      visible:false,\n      confirmLoading:false,\n      departNames:\"\",\n      departIds:''\n    }\n  },\n  mounted(){\n    this.departIds = this.value\n  },\n  watch:{\n    value(val){\n      if (this.customReturnField === 'id') {\n        this.departIds = val\n      }\n    }\n  },\n  methods:{\n    initComp(departNames){\n      this.departNames = departNames\n      //update-begin-author:lvdandan date:20200513 for:TESTA-438 部门选择组件自定义返回值，数据无法回填\n      //TODO 当返回字段为部门名称时会有问题,因为部门名称不唯一\n      //返回字段不为id时，根据返回字段获取id\n      if(this.customReturnField !== 'id' && this.value){\n        const dataList = this.$refs.innerDepartSelectModal.dataList;\n        console.log('this.value',this.value)\n        this.departIds = this.value.split(',').map(item => {\n          const data = dataList.filter(d=>d[this.customReturnField] === item)\n          return data.length > 0 ? data[0].id : ''\n        }).join(',')\n      }\n      //update-end-author:lvdandan date:20200513 for:TESTA-438 部门选择组件自定义返回值，数据无法回填\n    },\n    openModal(){\n      this.$refs.innerDepartSelectModal.show()\n    },\n    handleOK(rows, idstr) {\n      let value = ''\n      if (!rows && rows.length <= 0) {\n        this.departNames = ''\n        this.departIds = ''\n      } else {\n        value = rows.map(row => row[this.customReturnField]).join(',')\n        this.departNames = rows.map(row => row['departName']).join(',')\n        this.departIds = idstr\n      }\n      this.$emit(\"change\", value)\n    },\n    getDepartNames(){\n      return this.departNames\n    },\n    handleEmpty(){\n      this.handleOK('')\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  }\n}\n",null]}