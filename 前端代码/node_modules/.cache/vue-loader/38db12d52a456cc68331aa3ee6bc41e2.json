{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/jeecg/ImagCropper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/jeecg/ImagCropper.vue","mtime":1596297340393},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { VueCropper } from 'vue-cropper'\n\nexport default {\n  name: 'ImagCropper',\n  components: {\n    VueCropper\n  },\n  data () {\n    return {\n      model: false,\n      modelSrc: \"\",\n      crap: false,\n      previews: {},\n      lists: [\n        {img: \"https://avatars2.githubusercontent.com/u/15681693?s=460&v=4\"},\n        {img: \"http://cdn.xyxiao.cn/Landscape_1.jpg\"},\n        {img: \"http://cdn.xyxiao.cn/Landscape_2.jpg\"},\n        {img: \"http://cdn.xyxiao.cn/Landscape_3.jpg\"},\n        {img: \"http://cdn.xyxiao.cn/Landscape_4.jpg\"},\n        {img: \"http://cdn.xyxiao.cn/Portrait_1.jpg\"},\n        {img: \"http://cdn.xyxiao.cn/Portrait_2.jpg\"}\n      ],\n      option: {\n        img: \"\",\n        size: 1,\n        full: false,\n        outputType: \"png\",\n        canMove: true,\n        fixedBox: false,\n        original: false,\n        canMoveBox: true,\n        autoCrop: true,\n        // 只有自动截图开启 宽度高度才生效\n        autoCropWidth: 200,\n        autoCropHeight: 150,\n        centerBox: false,\n        high: false,\n        cropData: {},\n        enlarge: 1,\n        mode: 'contain',\n        maxImgSize: 3000,\n        limitMinSize: [100, 120]\n      },\n      example2: {\n        img: \"http://cdn.xyxiao.cn/Landscape_2.jpg\",\n        info: true,\n        size: 1,\n        outputType: \"jpeg\",\n        canScale: true,\n        autoCrop: true,\n        // 只有自动截图开启 宽度高度才生效\n        autoCropWidth: 300,\n        autoCropHeight: 250,\n        fixed: true,\n        // 真实的输出宽高\n        infoTrue: true,\n        fixedNumber: [4, 3]\n      },\n      example3: {\n        img: \"http://cdn.xyxiao.cn/Landscape_1.jpg\",\n        autoCrop: true,\n        autoCropWidth: 200,\n        autoCropHeight: 200,\n        fixedBox: true\n      },\n      downImg: \"#\",\n      previewStyle1: {},\n      previewStyle2: {},\n      previewStyle3: {},\n      previewStyle4: {},\n      code0: '',\n      code1: '',\n      code2: '',\n      code3: '',\n      preview3: '',\n    };\n  },\n  methods: {\n    changeImg() {\n      this.option.img = this.lists[~~(Math.random() * this.lists.length)].img;\n    },\n    startCrop() {\n      // start\n      this.crap = true;\n      this.$refs.cropper.startCrop();\n    },\n    stopCrop() {\n      //  stop\n      this.crap = false;\n      this.$refs.cropper.stopCrop();\n    },\n    clearCrop() {\n      // clear\n      this.$refs.cropper.clearCrop();\n    },\n    refreshCrop() {\n      // clear\n      this.$refs.cropper.refresh();\n    },\n    changeScale(num) {\n      num = num || 1;\n      this.$refs.cropper.changeScale(num);\n    },\n    rotateLeft() {\n      this.$refs.cropper.rotateLeft();\n    },\n    rotateRight() {\n      this.$refs.cropper.rotateRight();\n    },\n    finish(type) {\n      if (type === \"blob\") {\n        this.$refs.cropper.getCropBlob(data => {\n          var img = window.URL.createObjectURL(data);\n          this.model = true;\n          this.modelSrc = img;\n        });\n      } else {\n        this.$refs.cropper.getCropData(data => {\n          this.model = true;\n          this.modelSrc = data;\n        });\n      }\n    },\n    // 实时预览函数\n    realTime(data) {\n      var previews = data;\n      var h = 0.5;\n      var w = 0.2;\n\n      this.previewStyle1 = {\n        width: previews.w + \"px\",\n        height: previews.h + \"px\",\n        overflow: \"hidden\",\n        margin: \"0\",\n        zoom: h\n      };\n\n      this.previewStyle2 = {\n        width: previews.w + \"px\",\n        height: previews.h + \"px\",\n        overflow: \"hidden\",\n        margin: \"0\",\n        zoom: w\n      };\n\n      this.previewStyle3 = {\n        width: previews.w + \"px\",\n        height: previews.h + \"px\",\n        overflow: \"hidden\",\n        margin: \"0\",\n        zoom: (100 / previews.w)\n      };\n\n      this.previewStyle4 = {\n        width: previews.w + \"px\",\n        height: previews.h + \"px\",\n        overflow: \"hidden\",\n        margin: \"0\",\n        zoom: (100 / previews.h)\n      };\n\n      this.previews = data;\n    },\n\n    finish2(type) {\n      this.$refs.cropper2.getCropData(data => {\n        this.model = true;\n        this.modelSrc = data;\n      });\n    },\n    finish3(type) {\n      this.$refs.cropper3.getCropData(data => {\n        this.model = true;\n        this.modelSrc = data;\n      });\n    },\n    down(type) {\n      // 输出\n      if (type === \"blob\") {\n        this.$refs.cropper.getCropBlob(data => {\n          this.downImg = window.URL.createObjectURL(data);\n          if (window.navigator.msSaveBlob) {\n            var blobObject = new Blob([data]);\n            window.navigator.msSaveBlob(blobObject, \"demo.png\");\n          } else {\n            this.$nextTick(() => {\n              this.$refs.downloadDom.click();\n            });\n          }\n        });\n      } else {\n        this.$refs.cropper.getCropData(data => {\n          this.downImg = data;\n          if (window.navigator.msSaveBlob) {\n            var blobObject = new Blob([data]);\n            window.navigator.msSaveBlob(blobObject, \"demo.png\");\n          } else {\n            this.$nextTick(() => {\n              this.$refs.downloadDom.click();\n            });\n          }\n        });\n      }\n    },\n\n    uploadImg(e, num) {\n      //上传图片\n      // this.option.img\n      var file = e.target.files[0];\n      if (!/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value)) {\n        alert(\"图片类型必须是.gif,jpeg,jpg,png,bmp中的一种\");\n        return false;\n      }\n      var reader = new FileReader();\n      reader.onload = e => {\n        let data;\n        if (typeof e.target.result === \"object\") {\n          // 把Array Buffer转化为blob 如果是base64不需要\n          data = window.URL.createObjectURL(new Blob([e.target.result]));\n        } else {\n          data = e.target.result;\n        }\n        if (num === 1) {\n          this.option.img = data;\n        } else if (num === 2) {\n          this.example2.img = data;\n        }\n        this.$refs.uploadImg.value = ''\n      };\n      // 转化为blob\n      reader.readAsArrayBuffer(file);\n    },\n    imgLoad(msg) {\n      console.log(msg);\n    },\n\n    cropMoving(data) {\n      this.option.cropData = data;\n    }\n  },\n  components: {\n    VueCropper\n  },\n  mounted() {\n    this.changeImg();\n    var list = [].slice.call(document.querySelectorAll(\"pre code\"));\n    list.forEach((val, index) => {\n      hljs.highlightBlock(val);\n    });\n  }\n};\n",null]}