{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/dashboard/IndexDb.vue?vue&type=style&index=0&id=2f20f72b&lang=less&scoped=true&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/dashboard/IndexDb.vue","mtime":1596491763913},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/css-loader/index.js","mtime":1597311879695},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/less-loader/dist/cjs.js","mtime":1597311877773},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.circle-cust{\n  position: relative;\n  top: 28px;\n  left: -100%;\n}\n.extra-wrapper {\n  line-height: 55px;\n  padding-right: 24px;\n\n  .extra-item {\n    display: inline-block;\n    margin-right: 24px;\n\n    a {\n      margin-left: 24px;\n    }\n  }\n}\n\n\n.chart-card-header {\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n\n  .meta {\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    color: rgba(0, 0, 0, .45);\n    font-size: 14px;\n    line-height: 22px;\n  }\n}\n\n.chart-card-action {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.chart-card-footer {\n  border-top: 1px solid #e8e8e8;\n  padding-top: 9px;\n  margin-top: 8px;\n\n  > * {\n    position: relative;\n  }\n\n  .field {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin: 0;\n  }\n}\n\n.chart-card-content {\n  margin-bottom: 12px;\n  position: relative;\n  height: 46px;\n  width: 100%;\n\n  .content-fix {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n  }\n}\n\n.total {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-break: break-all;\n  white-space: nowrap;\n  color: #000;\n  margin-top: 4px;\n  margin-bottom: 0;\n  font-size: 30px;\n  line-height: 38px;\n  height: 38px;\n  text-align: center;\n}\n",{"version":3,"sources":["IndexDb.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IndexDb.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div class=\"page-header-index-wide\">\n    <a-row :gutter=\"24\">\n      <a-col :sm=\"24\" :md=\"12\" :xl=\"6\" :style=\"{ marginBottom: '24px' }\" v-for=\"(pipe,pindex) in pipes\" :key='pindex'>\n        <a-card :loading=\"loading\" :body-style=\"{ padding: '20px 24px 8px' }\" :bordered=\"false\">\n          <div class=\"chart-card-header\">\n            <div class=\"meta\">\n              <span class=\"chart-card-title\">{{ \"管道\"+pipe.pipeId }}</span>\n              <span class=\"chart-card-action\">\n                <slot name=\"action\"></slot>\n              </span>\n            </div>\n            <div class=\"total\"><span>正常 </span></div>\n          </div>\n          <div class=\"chart-card-content\">\n            <div class=\"content-fix\">\n              <slot></slot>\n            </div>\n          </div>\n          <div class=\"chart-card-footer\">\n            <div class=\"field\">\n              <slot name=\"footer\">{{ pipe.pipeDes }}</slot>\n            </div>\n          </div>\n        </a-card>\n      </a-col>\n    </a-row>\n\n    <!-- <a-card :loading=\"loading\" :bordered=\"false\" :body-style=\"{padding: '0'}\">\n      <div class=\"salesCard\">\n        <a-tabs default-active-key=\"1\" size=\"large\" :tab-bar-style=\"{marginBottom: '24px', paddingLeft: '16px'}\">\n          <div class=\"extra-wrapper\" slot=\"tabBarExtraContent\">\n            <div class=\"extra-item\">\n              <a>今日</a>\n              <a>本周</a>\n              <a>本月</a>\n              <a>本年</a>\n            </div>\n            <a-range-picker :style=\"{width: '256px'}\" />\n          </div>\n          <a-tab-pane loading=\"true\" tab=\"销售额\" key=\"1\">\n            <a-row>\n              <a-col :xl=\"16\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <bar title=\"销售额排行\" :dataSource=\"barData\"/>\n              </a-col>\n              <a-col :xl=\"8\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <rank-list title=\"门店销售排行榜\" :list=\"rankList\"/>\n              </a-col>\n            </a-row>\n          </a-tab-pane>\n          <a-tab-pane tab=\"销售趋势\" key=\"2\">\n            <a-row>\n              <a-col :xl=\"16\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <bar title=\"销售额趋势\" :dataSource=\"barData\"/>\n              </a-col>\n              <a-col :xl=\"8\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <rank-list title=\"门店销售排行榜\" :list=\"rankList\"/>\n              </a-col>\n            </a-row>\n          </a-tab-pane>\n        </a-tabs>\n      </div>\n    </a-card> -->\n\n    <a-row>\n      <a-col :span=\"24\">\n        <a-card :loading=\"loading\" :bordered=\"false\" title=\"最近一周访问量统计\" :style=\"{ marginTop: '24px' }\">\n          <a-row>\n            <a-col :span=\"6\">\n              <head-info title=\"传感器数据\" :content=\"'test'\"></head-info>\n            </a-col>\n          </a-row>\n          <line-chart-multid :fields=\"senvalFields\" :dataSource=\"senval\"></line-chart-multid>\n        </a-card>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\n  import ChartCard from '@/components/ChartCard'\n  import ACol from \"ant-design-vue/es/grid/Col\"\n  import ATooltip from \"ant-design-vue/es/tooltip/Tooltip\"\n  import MiniArea from '@/components/chart/MiniArea'\n  import MiniBar from '@/components/chart/MiniBar'\n  import MiniProgress from '@/components/chart/MiniProgress'\n  import RankList from '@/components/chart/RankList'\n  import Bar from '@/components/chart/Bar'\n  import LineChartMultid from '@/components/chart/LineChartMultid'\n  import HeadInfo from '@/components/tools/HeadInfo.vue'\n  import { filterObj } from '@/utils/util'\n  import { ACCESS_TOKEN } from \"@/store/mutation-types\"\n  import { getAction } from '@/api/manage'\n\n  import Trend from '@/components/Trend'\n  import { getLoginfo,getVisitInfo } from '@/api/api'\n\n  const rankList = []\n  for (let i = 0; i < 7; i++) {\n    rankList.push({\n      name: '白鹭岛 ' + (i+1) + ' 号店',\n      total: 1234.56 - i * 100\n    })\n  }\n  const barData = []\n  for (let i = 0; i < 12; i += 1) {\n    barData.push({\n      x: `${i + 1}月`,\n      y: Math.floor(Math.random() * 1000) + 200\n    })\n  }\n  export default {\n    name: \"IndexDb\",\n    components: {\n      ATooltip,\n      ACol,\n      ChartCard,\n      MiniArea,\n      MiniBar,\n      MiniProgress,\n      RankList,\n      Bar,\n      Trend,\n      LineChartMultid,\n      HeadInfo\n    },\n    data() {\n      return {\n        loading: true,\n        center: null,\n        rankList,\n        barData,\n        loginfo:{},\n        pipes:[],\n        senvalFields:['value'],\n        senval:[],\n        url: {\n          list: \"/pipeinfo/pipeInfo/list\",\n          slist:\"/senval/sensorValue/list\",\n        },\n        ipagination:{\n          current: 1,\n          pageSize: 10,\n          pageSizeOptions: ['10', '20', '30'],\n          showTotal: (total, range) => {\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\n          },\n          showQuickJumper: true,\n          showSizeChanger: true,\n          total: 0\n        },\n        columns: [\n          {\n            title: '#',\n            dataIndex: '',\n            key:'rowIndex',\n            width:60,\n            align:\"center\",\n            customRender:function (t,r,index) {\n              return parseInt(index)+1;\n            }\n          },\n          {\n            title:'管道设备ID',\n            align:\"center\",\n            dataIndex: 'pipeId'\n          },\n          {\n            title:'管道描述',\n            align:\"center\",\n            dataIndex: 'pipeDes'\n          },\n          {\n            title:'首纬度',\n            align:\"center\",\n            dataIndex: 'hlat'\n          },\n          {\n            title:'首经度',\n            align:\"center\",\n            dataIndex: 'hlong'\n          },\n          {\n            title:'尾纬度',\n            align:\"center\",\n            dataIndex: 'rlat'\n          },\n          {\n            title:'尾经度',\n            align:\"center\",\n            dataIndex: 'rlong'\n          },\n          {\n            title: '操作',\n            dataIndex: 'action',\n            align:\"center\",\n            scopedSlots: { customRender: 'action' },\n          }\n        ],\n        queryParam: {},\n        visitFields:['ip','visit'],\n        visitInfo:[],\n        indicator: <a-icon type=\"loading\" style=\"font-size: 24px\" spin />\n      }\n    },\n    computed: {\n      importExcelUrl: function(){\n        return `${window._CONFIG['domianURL']}/${this.url.importExcelUrl}`;\n      },\n    },\n    created() {\n      // setTimeout(() => {\n      //   this.loading = !this.loading\n      // }, 1000)\n      this.loadData();\n      getVisitInfo().then(res=>{\n          if(res.success){\n             this.visitInfo = res.result;\n             console.log(this.visitInfo);\n           }\n      })\n    },\n    methods: {\n      loadData () {\n        if(!this.url.list){\n          this.$message.error(\"请设置url.list属性!\")\n          return\n        }\n        var params = this.getQueryParams();\n        this.loading = true;\n        console.log(params);\n        getAction(this.url.list, '').then((res) => {\n          if (res.success) {\n            this.pipes = res.result.records;\n            console.log(this.pipes);\n            getAction(this.url.slist,'').then((res)=>{\n              if (res.success){\n                this.senval = res.result.records;\n                this.senval=this.senval.map((obj)=>{\n                  obj['type']=obj['updateTime'];\n                  delete obj['updateTime'];\n                  return obj;\n                })\n                console.log(this.senval);\n              }\n            })\n            this.ipagination.total = res.result.total;\n          }\n          if(res.code===510){\n            this.$message.warning(res.message)\n          }\n          this.loading = false;\n        })\n      },\n      getQueryParams() {\n      //获取查询条件\n        let sqp = {}\n        if(this.superQueryParams){\n          sqp['superQueryParams']=encodeURI(this.superQueryParams)\n          sqp['superQueryMatchType'] = this.superQueryMatchType\n        }\n        var param = Object.assign(sqp, this.queryParam, this.isorter ,this.filters);\n        param.field = this.getQueryField();\n        param.pageNo = this.ipagination.current;\n        param.pageSize = this.ipagination.pageSize;\n        return filterObj(param);\n      },\n      getQueryField() {\n        //TODO 字段权限控制\n        var str = \"id,\";\n        this.columns.forEach(function (value) {\n          str += \",\" + value.dataIndex;\n        });\n        return str;\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .circle-cust{\n    position: relative;\n    top: 28px;\n    left: -100%;\n  }\n  .extra-wrapper {\n    line-height: 55px;\n    padding-right: 24px;\n\n    .extra-item {\n      display: inline-block;\n      margin-right: 24px;\n\n      a {\n        margin-left: 24px;\n      }\n    }\n  }\n\n\n  .chart-card-header {\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n\n    .meta {\n      position: relative;\n      overflow: hidden;\n      width: 100%;\n      color: rgba(0, 0, 0, .45);\n      font-size: 14px;\n      line-height: 22px;\n    }\n  }\n\n  .chart-card-action {\n    cursor: pointer;\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n\n  .chart-card-footer {\n    border-top: 1px solid #e8e8e8;\n    padding-top: 9px;\n    margin-top: 8px;\n\n    > * {\n      position: relative;\n    }\n\n    .field {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      margin: 0;\n    }\n  }\n\n  .chart-card-content {\n    margin-bottom: 12px;\n    position: relative;\n    height: 46px;\n    width: 100%;\n\n    .content-fix {\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n    }\n  }\n\n  .total {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    word-break: break-all;\n    white-space: nowrap;\n    color: #000;\n    margin-top: 4px;\n    margin-bottom: 0;\n    font-size: 30px;\n    line-height: 38px;\n    height: 38px;\n    text-align: center;\n  }\n</style>"]}]}