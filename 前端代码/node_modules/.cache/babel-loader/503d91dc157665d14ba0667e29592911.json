{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/thread-loader/dist/cjs.js!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/dashboard/IndexDb.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/dashboard/IndexDb.vue","mtime":1596491763913},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ChartCard from '@/components/ChartCard';\nimport ACol from \"ant-design-vue/es/grid/Col\";\nimport ATooltip from \"ant-design-vue/es/tooltip/Tooltip\";\nimport MiniArea from '@/components/chart/MiniArea';\nimport MiniBar from '@/components/chart/MiniBar';\nimport MiniProgress from '@/components/chart/MiniProgress';\nimport RankList from '@/components/chart/RankList';\nimport Bar from '@/components/chart/Bar';\nimport LineChartMultid from '@/components/chart/LineChartMultid';\nimport HeadInfo from '@/components/tools/HeadInfo.vue';\nimport { filterObj } from '@/utils/util';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport { getAction } from '@/api/manage';\nimport Trend from '@/components/Trend';\nimport { getLoginfo, getVisitInfo } from '@/api/api';\nvar rankList = [];\n\nfor (var i = 0; i < 7; i++) {\n  rankList.push({\n    name: '白鹭岛 ' + (i + 1) + ' 号店',\n    total: 1234.56 - i * 100\n  });\n}\n\nvar barData = [];\n\nfor (var _i = 0; _i < 12; _i += 1) {\n  barData.push({\n    x: \"\".concat(_i + 1, \"\\u6708\"),\n    y: Math.floor(Math.random() * 1000) + 200\n  });\n}\n\nexport default {\n  name: \"IndexDb\",\n  components: {\n    ATooltip: ATooltip,\n    ACol: ACol,\n    ChartCard: ChartCard,\n    MiniArea: MiniArea,\n    MiniBar: MiniBar,\n    MiniProgress: MiniProgress,\n    RankList: RankList,\n    Bar: Bar,\n    Trend: Trend,\n    LineChartMultid: LineChartMultid,\n    HeadInfo: HeadInfo\n  },\n  data: function data() {\n    var h = this.$createElement;\n    return {\n      loading: true,\n      center: null,\n      rankList: rankList,\n      barData: barData,\n      loginfo: {},\n      pipes: [],\n      senvalFields: ['value'],\n      senval: [],\n      url: {\n        list: \"/pipeinfo/pipeInfo/list\",\n        slist: \"/senval/sensorValue/list\"\n      },\n      ipagination: {\n        current: 1,\n        pageSize: 10,\n        pageSizeOptions: ['10', '20', '30'],\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      columns: [{\n        title: '#',\n        dataIndex: '',\n        key: 'rowIndex',\n        width: 60,\n        align: \"center\",\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, {\n        title: '管道设备ID',\n        align: \"center\",\n        dataIndex: 'pipeId'\n      }, {\n        title: '管道描述',\n        align: \"center\",\n        dataIndex: 'pipeDes'\n      }, {\n        title: '首纬度',\n        align: \"center\",\n        dataIndex: 'hlat'\n      }, {\n        title: '首经度',\n        align: \"center\",\n        dataIndex: 'hlong'\n      }, {\n        title: '尾纬度',\n        align: \"center\",\n        dataIndex: 'rlat'\n      }, {\n        title: '尾经度',\n        align: \"center\",\n        dataIndex: 'rlong'\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      queryParam: {},\n      visitFields: ['ip', 'visit'],\n      visitInfo: [],\n      indicator: h(\"a-icon\", {\n        \"attrs\": {\n          \"type\": \"loading\",\n          \"spin\": true\n        },\n        \"style\": \"font-size: 24px\"\n      })\n    };\n  },\n  computed: {\n    importExcelUrl: function importExcelUrl() {\n      return \"\".concat(window._CONFIG['domianURL'], \"/\").concat(this.url.importExcelUrl);\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    // setTimeout(() => {\n    //   this.loading = !this.loading\n    // }, 1000)\n    this.loadData();\n    getVisitInfo().then(function (res) {\n      if (res.success) {\n        _this.visitInfo = res.result;\n        console.log(_this.visitInfo);\n      }\n    });\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this2 = this;\n\n      if (!this.url.list) {\n        this.$message.error(\"请设置url.list属性!\");\n        return;\n      }\n\n      var params = this.getQueryParams();\n      this.loading = true;\n      console.log(params);\n      getAction(this.url.list, '').then(function (res) {\n        if (res.success) {\n          _this2.pipes = res.result.records;\n          console.log(_this2.pipes);\n          getAction(_this2.url.slist, '').then(function (res) {\n            if (res.success) {\n              _this2.senval = res.result.records;\n              _this2.senval = _this2.senval.map(function (obj) {\n                obj['type'] = obj['updateTime'];\n                delete obj['updateTime'];\n                return obj;\n              });\n              console.log(_this2.senval);\n            }\n          });\n          _this2.ipagination.total = res.result.total;\n        }\n\n        if (res.code === 510) {\n          _this2.$message.warning(res.message);\n        }\n\n        _this2.loading = false;\n      });\n    },\n    getQueryParams: function getQueryParams() {\n      //获取查询条件\n      var sqp = {};\n\n      if (this.superQueryParams) {\n        sqp['superQueryParams'] = encodeURI(this.superQueryParams);\n        sqp['superQueryMatchType'] = this.superQueryMatchType;\n      }\n\n      var param = Object.assign(sqp, this.queryParam, this.isorter, this.filters);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      return filterObj(param);\n    },\n    getQueryField: function getQueryField() {\n      //TODO 字段权限控制\n      var str = \"id,\";\n      this.columns.forEach(function (value) {\n        str += \",\" + value.dataIndex;\n      });\n      return str;\n    }\n  }\n};",null]}