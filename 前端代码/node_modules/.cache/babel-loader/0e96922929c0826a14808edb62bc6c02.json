{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/system/SysGatewayRouteList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/system/SysGatewayRouteList.vue","mtime":1596297340396},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport JsonEditor from 'jsoneditor';\nimport 'jsoneditor/dist/jsoneditor.min.css';\nimport { getAction, postAction } from '@/api/manage';\nexport default {\n  name: \"SysGatewayRouteList\",\n  data: function data() {\n    return {\n      eleId: 'jsoneditor',\n      description: 'gateway路由管理管理页面',\n      editor: null,\n      editorWidth: 400,\n      editorHeight: 500,\n      url: {\n        list: '/sys/gatewayRoute/list',\n        update: '/sys/gatewayRoute/updateAll',\n        clear: '/sys/gatewayRoute/clearRedis'\n      }\n    };\n  },\n  created: function created() {\n    var winWidth = window.innerWidth;\n    console.log(\"页面宽度\", winWidth);\n    this.editorWidth = winWidth;\n  },\n  mounted: function mounted() {\n    this.initJsonEditor();\n  },\n  methods: {\n    initJsonEditor: function initJsonEditor() {\n      var container = document.getElementById(this.eleId);\n      var options = {\n        modes: ['text', 'code', 'tree', 'form', 'view'],\n        mode: 'tree',\n        ace: ace,\n        sortObjectKeys: 'code',\n        mainMenuBar: ['format']\n      };\n      this.editor = new JsonEditor(container, options);\n      this.initRouteData();\n    },\n    initRouteData: function initRouteData() {\n      var _this = this;\n\n      getAction(this.url.list).then(function (res) {\n        if (res.success) {\n          var array = res.result;\n          console.log('当前路由配置信息为', array);\n\n          _this.editor.set(array);\n        }\n      });\n    },\n    // 获取json\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      var text = this.editor.getText();\n      console.log(\"保存的json数据\", text);\n\n      if (!text || text.length <= 0 || text == '{}' || text == '[]') {\n        this.$message.warning('未录入任何信息');\n        return;\n      }\n\n      postAction(this.url.update, {\n        routes: text\n      }).then(function (res) {\n        if (res.success) {\n          _this2.$message.success(res.message);\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    clearRedis: function clearRedis() {\n      var _this3 = this;\n\n      getAction(this.url.clear).then(function (res) {\n        if (res.success) {\n          _this3.$message.success(res.message);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["SysGatewayRouteList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-card :bordered=\"false\" style=\"height: 100%\">\n    <div style=\"padding-bottom: 2px\">\n      <a-alert type=\"warning\" show-icon>\n        <div slot=\"message\" style=\"width: 100%\">\n          <span>路由配置请慎重</span>\n          <span style=\"display:inline-block;float:right;padding-right: 5px\">\n            <a @click=\"clearRedis\"><a-icon type=\"reload\" />清除缓存</a>\n          </span>\n        </div>\n      </a-alert>\n    </div>\n    <div :id=\"eleId\" :style=\"{ height: editorHeight + 'px', width: '100%' }\"></div>\n    <div style=\"text-align: center;padding-top:10px\">\n      <a-button type=\"primary\" @click=\"submitForm\" style=\"width:160px\">保存</a-button>\n    </div>\n  </a-card>\n</template>\n\n<script>\n  import JsonEditor from 'jsoneditor'\n  import 'jsoneditor/dist/jsoneditor.min.css'\n  import { getAction, postAction } from '@/api/manage'\n\n  export default {\n    name: \"SysGatewayRouteList\",\n    data () {\n      return {\n        eleId:'jsoneditor',\n        description: 'gateway路由管理管理页面',\n        editor: null,\n        editorWidth:400,\n        editorHeight:500,\n        url:{\n          list: '/sys/gatewayRoute/list',\n          update: '/sys/gatewayRoute/updateAll',\n          clear: '/sys/gatewayRoute/clearRedis'\n        },\n\n      }\n    },\n    created() {\n      let winWidth = window.innerWidth;\n      console.log(\"页面宽度\",winWidth)\n      this.editorWidth = winWidth\n\n    },\n    mounted(){\n      this.initJsonEditor();\n    },\n    methods: {\n      initJsonEditor() {\n        let container = document.getElementById(this.eleId);\n        let options = {\n          modes: ['text', 'code', 'tree', 'form', 'view'],\n          mode: 'tree',\n          ace: ace,\n          sortObjectKeys: 'code',\n          mainMenuBar:['format']\n        };\n        this.editor = new JsonEditor(container, options);\n        this.initRouteData();\n      },\n      initRouteData(){\n        getAction(this.url.list).then(res=>{\n          if(res.success){\n            let array = res.result\n            console.log('当前路由配置信息为', array)\n            this.editor.set(array)\n          }\n        })\n      },\n      // 获取json\n      submitForm() {\n        let text = this.editor.getText()\n        console.log(\"保存的json数据\",text)\n        if(!text || text.length<=0 || text=='{}' || text=='[]'){\n          this.$message.warning('未录入任何信息')\n          return ;\n        }\n        postAction(this.url.update,{\n          routes:text\n        }).then(res=>{\n          if(res.success){\n            this.$message.success(res.message)\n          }else{\n            this.$message.error(res.message)\n          }\n        })\n      },\n      clearRedis(){\n        getAction(this.url.clear).then(res=>{\n          if(res.success){\n            this.$message.success(res.message)\n          }\n        })\n      }\n\n    }\n  }\n</script>\n"],"sourceRoot":"src/views/system"}]}