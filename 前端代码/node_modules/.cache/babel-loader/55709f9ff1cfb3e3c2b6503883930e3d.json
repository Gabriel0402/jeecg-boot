{"remainingRequest":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/thread-loader/dist/cjs.js!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/system/SysGatewayRouteList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/src/views/system/SysGatewayRouteList.vue","mtime":1596297340396},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyang/Documents/jeecg-boot/前端代码/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport JsonEditor from 'jsoneditor';\nimport 'jsoneditor/dist/jsoneditor.min.css';\nimport { getAction, postAction } from '@/api/manage';\nexport default {\n  name: \"SysGatewayRouteList\",\n  data: function data() {\n    return {\n      eleId: 'jsoneditor',\n      description: 'gateway路由管理管理页面',\n      editor: null,\n      editorWidth: 400,\n      editorHeight: 500,\n      url: {\n        list: '/sys/gatewayRoute/list',\n        update: '/sys/gatewayRoute/updateAll',\n        clear: '/sys/gatewayRoute/clearRedis'\n      }\n    };\n  },\n  created: function created() {\n    var winWidth = window.innerWidth;\n    console.log(\"页面宽度\", winWidth);\n    this.editorWidth = winWidth;\n  },\n  mounted: function mounted() {\n    this.initJsonEditor();\n  },\n  methods: {\n    initJsonEditor: function initJsonEditor() {\n      var container = document.getElementById(this.eleId);\n      var options = {\n        modes: ['text', 'code', 'tree', 'form', 'view'],\n        mode: 'tree',\n        ace: ace,\n        sortObjectKeys: 'code',\n        mainMenuBar: ['format']\n      };\n      this.editor = new JsonEditor(container, options);\n      this.initRouteData();\n    },\n    initRouteData: function initRouteData() {\n      var _this = this;\n\n      getAction(this.url.list).then(function (res) {\n        if (res.success) {\n          var array = res.result;\n          console.log('当前路由配置信息为', array);\n\n          _this.editor.set(array);\n        }\n      });\n    },\n    // 获取json\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      var text = this.editor.getText();\n      console.log(\"保存的json数据\", text);\n\n      if (!text || text.length <= 0 || text == '{}' || text == '[]') {\n        this.$message.warning('未录入任何信息');\n        return;\n      }\n\n      postAction(this.url.update, {\n        routes: text\n      }).then(function (res) {\n        if (res.success) {\n          _this2.$message.success(res.message);\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    clearRedis: function clearRedis() {\n      var _this3 = this;\n\n      getAction(this.url.clear).then(function (res) {\n        if (res.success) {\n          _this3.$message.success(res.message);\n        }\n      });\n    }\n  }\n};",null]}